package hackathon2021;
import java.io.*;

public class PyScript{

    final protected String pythonScript = "fire_detection.py ";
    protected String pythonVenv;
    protected String filename;
    protected String verdict;

    public PyScript(){
        filename = "";
        verdict = "";
        pythonVenv = "";
    }
    public void run(){
        String path = System.getProperty("user.dir");
        System.out.println(path);
        path += "\\src\\Python\\";
        pythonVenv = "source " + path + "venv\\Scripts\\activate";
        //pythonVenv = "src\\Python\\venv\\Scripts\\activate.bat";
        if(filename.isEmpty())
            throw new IllegalArgumentException("File is empty");
        try {
            Process p = Runtime.getRuntime().exec(pythonVenv+" && python " + path + pythonScript + filename);
            BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
            verdict = in.readLine();
            System.out.println(verdict);
        }catch(Exception e){
            System.out.println("Exception caught in PyScript.run()");
        }
    }
    public void setFilename(String f){
        filename = f;
    }
}
